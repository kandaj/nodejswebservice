webpackJsonp([1],{"43Wh":function(t,e){},A1Dd:function(t,e){},Hmqa:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("link",{attrs:{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"}}),t._v(" "),s("nav",{staticClass:"navbar is-dark",attrs:{role:"navigation","aria-label":"main navigation"}},[s("div",{staticClass:"navbar-brand"},[s("a",{staticClass:"navbar-item"},[s("router-link",{attrs:{to:"/"}},[t._v("EGA")])],1),t._v(" "),s("div",{staticClass:"navbar-menu is-active"},[s("div",{staticClass:"navbar-start"},[s("a",{staticClass:"navbar-item"},[s("router-link",{attrs:{to:"/"}},[t._v("Home")])],1),t._v(" "),s("a",{staticClass:"navbar-item"},[s("router-link",{attrs:{to:"/file-status"}},[t._v("File Status")])],1),t._v(" "),s("a",{staticClass:"navbar-item"},[s("router-link",{attrs:{to:"/file-details"}},[t._v("File Details")])],1)])])])]),t._v(" "),s("router-view")],1)},staticRenderFns:[]};var n=s("VU/8")({name:"App"},i,!1,function(t){s("A1Dd")},null,null).exports,l=s("/ocq"),r={name:"ListStatus",data:function(){return{countData:null,error:null,statusID:null}},created:function(){var t=this;H.$on("refreshView",function(){t.fetchData()}),this.fetchData()},computed:{},watch:{$route:"fetchData"},methods:{fetchData:function(){var t=this;this.error=this.post=null,this.loading=!0,this.$http.get("files/get_count/").then(function(e){t.countData=e.data.data}).catch(function(e){t.errors.push(e)})},setStatus:function(t){H.$emit("listFiles",t)}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container is-fluid"},[s("div",{staticClass:"columns is-multiline"},t._l(t.countData,function(e){return s("div",{staticClass:"column is-"},[s("div",{staticClass:"card",class:{"status-danger":e.total>100||10==e.archive_status_id,"status-normal":e.total<100&&10!=e.archive_status_id}},[s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[s("h2",[t._v("Status ID: "+t._s(e.archive_status_id))]),t._v(" "),s("h4",[t._v(t._s(e.total)+" - Files")])]),t._v(" "),s("button",{staticClass:"button is-info",on:{click:function(s){t.setStatus(e.archive_status_id)}}},[t._v("Show Files")])])])])}))])},staticRenderFns:[]};var o=s("VU/8")(r,c,!1,function(t){s("UmzE")},"data-v-08e231e7",null).exports,u=s("BO1k"),d=s.n(u),h=s("fZjL"),v=s.n(h),f={name:"ListFiles",props:{statusCodeID:{type:Number}},data:function(){return{statusCodes:[null,8,14,22,23,25],selectedSC:null,tableData:[],tableColumns:[{field:"file_name",label:"File Name",width:500},{field:"stable_id",label:"Stable ID"},{field:"staging_source",label:"Box"},{field:"submitted_file_name",label:"Submitted File Name"}],checkedRows:[],searchTerm:"",isPaginated:!0,isPaginationSimple:!1,defaultSortDirection:"asc",currentPage:1,perPage:10,isActive:!1,updatedRows:!1}},watch:{statusCodeID:function(){null!=this.statusCodeID&&(this.showFiles(this.statusCodeID),this.isActive=!1)}},methods:{showFiles:function(t){var e=this;this.$http.get("files/get_status/"+t).then(function(t){e.tableData=t.data.data}).catch(function(t){e.errors.push(t)})},filterTable:function(){var t=this.searchTerm&&this.searchTerm.toLowerCase(),e=this.tableData;return this.searchTerm?e=e.filter(function(e){return v()(e).some(function(s){return String(e[s]).toLowerCase().indexOf(t)>-1})}):this.showFiles(this.statusCodeID),this.tableData=e,this.tableData},updateFiles:function(){var t=this,e=[],s=[],a=!0,i=!1,n=void 0;try{for(var l,r=d()(this.checkedRows);!(a=(l=r.next()).done);a=!0){var c=l.value;s.push(c.stable_id)}}catch(t){i=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw n}}return e.push({statusID:this.selectedSC,stableIDs:s}),this.$http.post("files/update_status/",e).then(function(e){t.updatedRows=e.data.data,t.isActive=!0,t.checkedRows=[],t.showFiles(t.statusCodeID),H.$emit("refreshView")}).catch(function(e){t.errors.push(e)})}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0==isNaN(t.statusCodeID)&&null!=t.statusCodeID?s("div",{staticClass:"columns"},[s("section",[s("transition",[s("b-notification",{attrs:{active:t.isActive,type:"is-success","has-icon":""},on:{"update:active":function(e){t.isActive=e}}},[t._v("\n        "+t._s(t.updatedRows)+" row(s) has been updated\n      ")])],1),t._v(" "),s("div",{staticClass:"column"},[s("h2",{staticClass:"heading"},[t._v("Status "+t._s(t.statusCodeID)+" Files")])]),t._v(" "),s("div",{staticClass:"columns is-multiline"},[s("div",{staticClass:"column"},[s("nav",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},[s("button",{staticClass:"button field is-danger",attrs:{disabled:!t.checkedRows.length},on:{click:function(e){t.checkedRows=[]}}},[s("span",[t._v("Clear checked")])])]),t._v(" "),s("div",{staticClass:"level-item"},[s("b-select",{attrs:{placeholder:"Select a status"},model:{value:t.selectedSC,callback:function(e){t.selectedSC=e},expression:"selectedSC"}},t._l(t.statusCodes,function(e){return s("option",{domProps:{value:e}},[t._v("\n                  "+t._s(e)+"\n                ")])}))],1),t._v(" "),s("div",{staticClass:"level-item"},[s("button",{staticClass:"button is-primary",attrs:{disabled:null==t.selectedSC||t.selectedSC===t.statusCodeID},on:{click:function(e){t.updateFiles()}}},[t._v("Update Files")])])])])]),t._v(" "),s("div",{staticClass:"column"}),t._v(" "),s("div",{staticClass:"column"}),t._v(" "),s("div",{staticClass:"column"},[s("div",{staticClass:"field is-grouped"},[s("p",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"input",attrs:{type:"text",placeholder:"Enter Term"},domProps:{value:t.searchTerm},on:{keyup:function(e){t.filterTable()},input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}})]),t._v(" "),t._m(0)])])]),t._v(" "),s("b-table",{attrs:{data:t.tableData,columns:t.tableColumns,"checked-rows":t.checkedRows,paginated:t.isPaginated,"per-page":t.perPage,"current-page":t.currentPage,"pagination-simple":t.isPaginationSimple,checkable:"",bordered:""},on:{"update:checkedRows":function(e){t.checkedRows=e},"update:currentPage":function(e){t.currentPage=e}}},[s("template",{slot:"bottom-left"},[s("b",[t._v("Total checked")]),t._v(": "+t._s(t.checkedRows.length)+"\n      ")])],2)],1)]):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"control"},[e("a",{staticClass:"button is-info"},[this._v("\n              Search\n            ")])])}]};var m=s("VU/8")(f,_,!1,function(t){s("43Wh")},"data-v-71d4bc3c",null).exports,p={name:"Home",data:function(){return{loading:!1,chartData:null,error:null,errorStates:null,processingStates:null}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.error=this.post=null,this.loading=!0,this.$http.get("files/get_count/").then(function(e){t.chartData=e.data.data,t.getChartData(t.chartData)}).catch(function(e){t.errors.push(e)})},getChartData:function(t){var e=[25,15,10,7,13,6,9,50,52,3],s=[],a=[];this.chartData.filter(function(t){e.indexOf(t.archive_status_id)>-1?s.push([t.archive_status_id,parseInt(t.total)]):a.push([t.archive_status_id,parseInt(t.total)])});this.errorStates=s,this.processingStates=a}}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("div",{staticClass:"container"},[s("br"),t._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("h4",[t._v("Error States")]),t._v(" "),s("column-chart",{attrs:{data:t.errorStates}})],1),t._v(" "),s("div",{staticClass:"column"},[s("h4",[t._v("Processing States")]),t._v(" "),s("column-chart",{attrs:{data:t.processingStates}})],1)])])])},staticRenderFns:[]};var C=s("VU/8")(p,b,!1,function(t){s("Xv+z")},null,null).exports,g={name:"FileInfo",props:{stableID:{type:String,required:!0}},data:function(){return{errors:null,fileInfoDetails:null,fileProcessLog:null,filePipelineLog:null,tableData:[],tableColumns:[{field:"archive_status_id",label:"Status ID"},{field:"timestamp",label:"Timestamp",sortable:!0}],isPaginated:!0,isPaginationSimple:!1,currentPage:1,perPage:14}},watch:{stableID:function(){null!=this.stableID&&(this.getDetails(this.stableID),this.getPipelineLog(this.stableID))}},mounted:function(){null!=this.stableID&&(this.getDetails(this.stableID),this.getPipelineLog(this.stableID))},methods:{getDetails:function(){var t=this;this.$http.get("http://localhost:5000/api/v1/files/get_details/"+this.stableID).then(function(e){var s=e.data.data;s.checksums=t.getMD5(s.md5,s.process_step),t.fileInfoDetails=s}).catch(function(e){t.errors.push(e)})},getProcessLog:function(){var t=this;this.$http.get("files/get_process_log/"+this.stableID).then(function(e){t.tableData=e.data.data}).catch(function(e){t.errors.push(e)})},getPipelineLog:function(){var t=this;this.$http.get("files/get_pipeline_log/"+this.stableID).then(function(e){t.filePipelineLog=e.data}).catch(function(e){t.errors.push(e)})},getMD5:function(t,e){var s=[];if(null!==t)for(var a=t.split(","),i=e.split(","),n=0;n<a.length;n++)s[i[n].replace(/\s+/g," ").trim()]=a[n].replace(/\s+/g," ").trim(),s.push({process_step:i[n].replace(/\s+/g," ").trim(),md5_checksum:a[n].replace(/\s+/g," ").trim()});return s}}},D={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("div",{staticClass:"columns"},[null!=t.fileInfoDetails?s("div",{staticClass:"column"},[s("h3",[t._v("File Information")]),t._v(" "),s("table",{staticClass:"table is-fullwidth is-bordered"},[s("tr",[t._m(0),s("td",[t._v(t._s(t.fileInfoDetails.stable_id))])]),t._v(" "),s("tr",[t._m(1),s("td",[t._v(t._s(t.fileInfoDetails.archive_status_id))])]),t._v(" "),s("tr",[t._m(2),s("td",[t._v(t._s(t.fileInfoDetails.file_name))])]),t._v(" "),s("tr",[t._m(3),s("td",[t._v(t._s(t.fileInfoDetails.submitted_file_name))])]),t._v(" "),s("tr",[t._m(4),s("td",[t._v(t._s(t.fileInfoDetails.staging_source))])]),t._v(" "),s("tr",[t._m(5),s("td",[t._v(t._s(Number(t.fileInfoDetails.file_size/1073741824).toFixed(2))+" GB")])]),t._v(" "),s("tr",[t._m(6),s("td",[t._v(t._s(t.fileInfoDetails.run_analysis_accession))])]),t._v(" "),s("tr",[t._m(7),s("td",[t._v(t._s(t.fileInfoDetails.file_created))])]),t._v(" "),s("tr",[t._m(8),s("td",[t._v(t._s(t.fileInfoDetails.file_updated))])]),t._v(" "),t._l(t.fileInfoDetails.checksums,function(e){return s("tr",[s("td",[s("b",[t._v(t._s(e.process_step))])]),s("td",[t._v(t._s(e.md5_checksum))])])})],2)]):t._e()]),t._v(" "),s("section",[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-12  pipelinelog"},[t._m(9),t._v(" "),s("pre",[t._v(t._s(t.filePipelineLog))])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("b",[this._v("Stable ID")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("b",[this._v("Archive Status")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("b",[this._v("File Name")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("b",[this._v("Submitted File Name")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("b",[this._v("Staging Source")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("b",[this._v("File Size")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("b",[this._v("Run/Analysis Accession")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("b",[this._v("File Created")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("b",[this._v("File Updated")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"column is-half is-offset-one-quarter"},[e("h3",[this._v("Pipeline Log")])])}]};var I={components:{fileInfo:s("VU/8")(g,D,!1,function(t){s("Hmqa")},"data-v-74b8c64d",null).exports},name:"GetFileDetails",data:function(){return{stableInputValue:null,fileStableID:null}},methods:{setStableId:function(){this.fileStableID=this.stableInputValue}}},S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"fileDetails"}},[s("br"),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-half is-offset-one-quarter"},[s("section",[s("nav",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},[s("b-input",{attrs:{placeholder:"Enter File Stable ID"},model:{value:t.stableInputValue,callback:function(e){t.stableInputValue=e},expression:"stableInputValue"}})],1),t._v(" "),s("div",{staticClass:"level-item"},[s("button",{staticClass:"button is-primary",attrs:{disabled:null==t.stableInputValue},on:{click:t.setStableId}},[t._v("Get Details")])])])])])])]),t._v(" "),null!=t.fileStableID?s("div",{staticClass:"column"},[s("file-info",{attrs:{stableID:t.fileStableID}})],1):t._e()])])},staticRenderFns:[]};var w=s("VU/8")(I,S,!1,function(t){s("rBH8")},null,null).exports,F={components:{ListStatus:o,listFiles:m},name:"Home",data:function(){return{statusID:null}},created:function(){var t=this;H.$on("listFiles",function(e){t.statusID=e})}},k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home"},[e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("list-status")],1)]),this._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("list-files",{attrs:{statusCodeID:parseInt(this.statusID)}})],1)])])])},staticRenderFns:[]};var $=s("VU/8")(F,k,!1,function(t){s("zpKM")},null,null).exports;a.a.use(l.a);var P=new l.a({routes:[{path:"/",name:"Home",component:C},{path:"/file-details",name:"FileDetails",component:w},{path:"/file-status",name:"FileStatus",component:$}]}),E=s("MMSg"),R=s.n(E),x=s("mtWM"),y=s.n(x).a.create({baseURL:"http://localhost:5000/api/v1/"}),L=s("8gty"),V=s("tZw+"),A=s.n(V),T=s("504h"),U=s.n(T);s("doPI");s.d(e,"eventBus",function(){return H}),window.Highcharts=U.a,a.a.use(A.a,{Chartkick:L.a}),a.a.prototype.$http=y,a.a.config.productionTip=!1,a.a.use(R.a,{defaultIconPack:"fa"});var H=new a.a;new a.a({el:"#app",router:P,components:{App:n},template:"<App/>"})},UmzE:function(t,e){},"Xv+z":function(t,e){},doPI:function(t,e){},rBH8:function(t,e){},zpKM:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f48db7c1c41ab939bc3d.js.map